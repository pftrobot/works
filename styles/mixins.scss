@use "sass:list";
@use './colors' as *;
@use './typography' as *;
@use './spacing' as *;
@use './layout' as *;

/*
* MEDIA QUERY
*/
@mixin respondFrom($breakpoint) {
  @media (min-width: mediaBreakpoint($breakpoint)) {
    @content;
  }
}

@mixin respondTo($breakpoint) {
  @media (max-width: mediaBreakpoint($breakpoint) - 1px) {
    @content;
  }
}

/*
* CONTAINER QUERY
*/
@mixin containerQuery($size, $container-name: null) {
  @if $container-name {
    @container #{$container-name} (max-width: #{containerBreakpoint($size)}) {
      @content;
    }
  } @else {
    @container (max-width: #{containerBreakpoint($size)}) {
      @content;
    }
  }
}

/*
* CONTAINER SIZE
*/
@mixin container($size: 'desktop') {
  inline-size: container($size);
  max-inline-size: #{$container-max-width}px;
  margin-inline: auto;

  @include respondTo('laptop') {
    inline-size: container('laptop');
  }
  @include respondTo('tablet') {
    inline-size: container('tablet');
  }
  @include respondTo('mobile-lg') {
    inline-size: container('mobile-lg');
  }
  @include respondTo('mobile') {
    inline-size: container('mobile');
  }
}

/*
* TEXT STYLE
*/
@mixin textStyle($size, $weight: 400, $leading: 1.5, $tracking: 0) {
  font-size: $size;
  font-weight: $weight;
  line-height: $leading;
  letter-spacing: $tracking;
}

/*
* LAYOUT - FLEX, GRID
*/
@mixin flex($direction: row, $align: stretch, $justify: flex-start, $gap: 0, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  align-items: $align;
  justify-content: $justify;
  flex-wrap: $wrap;
  @if $gap > 0 {
    gap: space($gap);
  }
}

@mixin grid($columns, $gap: 6) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: space($gap);
}

@mixin grid-auto-fit($min-size: 20rem, $gaps...) {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax($min-size, 1fr));

  @if list.length($gaps) == 1 {
    gap: space(list.nth($gaps, 1));
  } @else if list.length($gaps) == 2 {
    gap: space(list.nth($gaps, 1)) space(list.nth($gaps, 2));
  } @else {
    gap: 0;
  }
}

/*
* COMPONENT
*/
@mixin input-base {
  width: 100%;
  color: color('text', 'text');
  @include textStyle($text-base, $font-light);
  padding: space(4) space(2);
  outline: none;
  background: transparent;
  border: none;
  border-block-end: 1px solid #2c2c2c;
  transition: all $transition-base;

  &::placeholder {
    font-weight: $font-light;
    color: color('text', 'muted');
  }

  &:focus {
    border-color: color('key', 'primary-deep');
  }

  &.error {
    color: white;
    border-color: color('semantic', 'error');
  }
}

/*
* INTERACTION
*/
// hover: color + underline
@mixin linkUnderline($color: #e1e1e1, $hoverColor: #e1e1e1) {
  position: relative;
  transition: color 0.2s;

  color: $color;

  &::before {
    position: absolute;
    inset-block-end: 3px;
    inset-inline-start: 0;
    display: block;
    inline-size: 0;
    block-size: 1px;
    content: '';
    transition: width 0.2s;

    background-color: $color;
  }

  @media (hover: hover) {
    &:hover {
      color: $hoverColor;

      &::before {
        width: 100%;

        background-color: $hoverColor;
      }
    }
  }
}

@mixin fadeSlideUp($duration: 0.6s, $delay: 0s) {
  opacity: 0;
  transform: translateY(space(6));
  animation: fadeSlideUp $duration ease forwards;
  animation-delay: $delay;
}

@keyframes fadeSlideUp {
  0% {
    opacity: 0;
    transform: translateY(space(6));
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}